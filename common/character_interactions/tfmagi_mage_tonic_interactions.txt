tfmagi_mage_diplomacy_tonic_interaction = {
	icon = tfmagi_potion_blue
	interface_priority = 0
	category = interaction_category_friendly
	desc = tfmagi_mage_diplomacy_tonic_interaction_desc

	is_shown = {
		scope:actor = {
			var:tfmagi_mage_tonic_diplomacy_num > 0
		}
	}

	is_valid = { #this is for AI
        scope:actor = {
		    is_ai = no
        }
    }

	on_accept = {
		scope:actor = {
			change_variable = { name = tfmagi_mage_tonic_diplomacy_num subtract = 1 }
		}
		scope:recipient = {
			hidden_effect = { 
				remove_character_modifier = tfmagi_tonic_diplomacy_04
				remove_character_modifier = tfmagi_tonic_diplomacy_03
				remove_character_modifier = tfmagi_tonic_diplomacy_02
				remove_character_modifier = tfmagi_tonic_diplomacy_01
				remove_character_modifier = tfmagi_tonic_diplomacy_00
			}
		}
		if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_04 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_diplomacy_04
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_03 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_diplomacy_03
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_02 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_diplomacy_02
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_01 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_diplomacy_01
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else = {
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_diplomacy_00
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
	}

	auto_accept = yes
}
tfmagi_mage_martial_tonic_interaction = {
	icon = tfmagi_potion_red
	interface_priority = 0
	category = interaction_category_friendly
	desc = tfmagi_mage_martial_tonic_interaction_desc

	is_shown = {
		scope:actor = {
			var:tfmagi_mage_tonic_martial_num > 0
		}
	}

	is_valid = { #this is for AI
        scope:actor = {
		    is_ai = no
        }
    }

	on_accept = {
		scope:actor = {
			change_variable = { name = tfmagi_mage_tonic_martial_num subtract = 1 }
		}
		scope:recipient = {
			hidden_effect = { 
				remove_character_modifier = tfmagi_tonic_martial_04
				remove_character_modifier = tfmagi_tonic_martial_03
				remove_character_modifier = tfmagi_tonic_martial_02
				remove_character_modifier = tfmagi_tonic_martial_01
				remove_character_modifier = tfmagi_tonic_martial_00
			}
		}
		if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_04 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_martial_04
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_03 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_martial_03
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_02 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_martial_02
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_01 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_martial_01
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else = {
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_martial_00
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
	}

	auto_accept = yes
}
tfmagi_mage_stewardship_tonic_interaction = {
	icon = tfmagi_potion_green
	interface_priority = 0
	category = interaction_category_friendly
	desc = tfmagi_mage_stewardship_tonic_interaction_desc

	is_shown = {
		scope:actor = {
			var:tfmagi_mage_tonic_stewardship_num > 0
		}
	}

	is_valid = { #this is for AI
        scope:actor = {
		    is_ai = no
        }
    }

	on_accept = {
		scope:actor = {
			change_variable = { name = tfmagi_mage_tonic_stewardship_num subtract = 1 }
		}
		scope:recipient = {
			hidden_effect = { 
				remove_character_modifier = tfmagi_tonic_stewardship_04
				remove_character_modifier = tfmagi_tonic_stewardship_03
				remove_character_modifier = tfmagi_tonic_stewardship_02
				remove_character_modifier = tfmagi_tonic_stewardship_01
				remove_character_modifier = tfmagi_tonic_stewardship_00
			}
		}
		if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_04 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_stewardship_04
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_03 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_stewardship_03
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_02 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_stewardship_02
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_01 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_stewardship_01
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else = {
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_stewardship_00
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
	}

	auto_accept = yes
}
tfmagi_mage_intrigue_tonic_interaction = {
	icon = tfmagi_potion_purple
	interface_priority = 0
	category = interaction_category_friendly
	desc = tfmagi_mage_intrigue_tonic_interaction_desc

	is_shown = {
		scope:actor = {
			var:tfmagi_mage_tonic_intrigue_num > 0
		}
	}

	is_valid = { #this is for AI
        scope:actor = {
		    is_ai = no
        }
    }

	on_accept = {
		scope:actor = {
			change_variable = { name = tfmagi_mage_tonic_intrigue_num subtract = 1 }
		}
		scope:recipient = {
			hidden_effect = { 
				remove_character_modifier = tfmagi_tonic_intrigue_04
				remove_character_modifier = tfmagi_tonic_intrigue_03
				remove_character_modifier = tfmagi_tonic_intrigue_02
				remove_character_modifier = tfmagi_tonic_intrigue_01
				remove_character_modifier = tfmagi_tonic_intrigue_00
			}
		}
		if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_04 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_intrigue_04
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_03 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_intrigue_03
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_02 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_intrigue_02
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_01 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_intrigue_01
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else = {
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_intrigue_00
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
	}

	auto_accept = yes
}
tfmagi_mage_learning_tonic_interaction = {
	icon = tfmagi_potion_grey
	interface_priority = 0
	category = interaction_category_friendly
	desc = tfmagi_mage_learning_tonic_interaction_desc

	is_shown = {
		scope:actor = {
			var:tfmagi_mage_tonic_learning_num > 0
		}
	}

	is_valid = { #this is for AI
        scope:actor = {
		    is_ai = no
        }
    }

	on_accept = {
		scope:actor = {
			change_variable = { name = tfmagi_mage_tonic_learning_num subtract = 1 }
		}
		scope:recipient = {
			hidden_effect = { 
				remove_character_modifier = tfmagi_tonic_learning_04
				remove_character_modifier = tfmagi_tonic_learning_03
				remove_character_modifier = tfmagi_tonic_learning_02
				remove_character_modifier = tfmagi_tonic_learning_01
				remove_character_modifier = tfmagi_tonic_learning_00
			}
		}
		if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_04 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_learning_04
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_03 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_learning_03
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_02 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_learning_02
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_01 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_learning_01
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else = {
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_learning_00
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
	}

	auto_accept = yes
}
tfmagi_mage_stress_loss_tonic_interaction = {
	icon = tfmagi_potion_grey
	interface_priority = 0
	category = interaction_category_friendly
	desc = tfmagi_mage_stress_loss_tonic_interaction_desc

	is_shown = {
		scope:actor = {
			var:tfmagi_mage_tonic_stress_loss_num > 0
		}
	}

	is_valid = { #this is for AI
        scope:actor = {
		    is_ai = no
        }
    }

	on_accept = {
		scope:actor = {
			change_variable = { name = tfmagi_mage_tonic_stress_loss_num subtract = 1 }
		}
		scope:recipient = {
			hidden_effect = { 
				remove_character_modifier = tfmagi_tonic_stress_loss_04
				remove_character_modifier = tfmagi_tonic_stress_loss_03
				remove_character_modifier = tfmagi_tonic_stress_loss_02
				remove_character_modifier = tfmagi_tonic_stress_loss_01
				remove_character_modifier = tfmagi_tonic_stress_loss_00
			}
		}
		if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_04 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_stress_loss_04
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_03 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_stress_loss_03
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_02 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_stress_loss_02
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else_if = {
			limit = {
				scope:actor.has_trait_xp = {
					trait = tfmagi_mage
					track = tfmagi_mage_mastery
					value >= tfmagi_mage_mastery_01 
				}
			}
				
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_stress_loss_01
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		else = {
			scope:recipient = {
				add_character_modifier = {
					modifier = tfmagi_tonic_stress_loss_00
					years = scope:actor.tfmagi_tonic_duration
				}
			}
		}
		scope:recipient = { add_stress = tfmagi_tonic_stress_removed }
	}

	auto_accept = yes
}
tfmagi_mage_immortality_elixir_interaction = {
	icon = tfmagi_immortality_elixir
	interface_priority = 5
	category = interaction_category_friendly
	desc = tfmagi_mage_immortality_elixir_interaction_desc

	is_shown = {
		scope:actor = {
			var:tfmagi_mage_immortality_elixir_num > 0
		}
	}

	is_valid = { #this is for AI
        scope:actor = {
		    is_ai = no
        }
    }

	on_accept = {
		scope:actor = {
			change_variable = { name = tfmagi_mage_immortality_elixir_num subtract = 1 }
		}
		scope:recipient = { add_trait = immortal }
	}

	auto_accept = yes
}
tfmagi_mage_panacea_interaction = {
	icon = tfmagi_panacea
	interface_priority = 5
	category = interaction_category_friendly
	desc = tfmagi_mage_panacea_interaction_desc

	is_shown = {
		scope:actor = {
			var:tfmagi_mage_panacea_num > 0
		}
	}

	is_valid = { #this is for AI
        scope:actor = {
		    is_ai = no
        }
    }

	on_accept = {
		scope:actor = {
			change_variable = { name = tfmagi_mage_panacea_num subtract = 1 }
		}
		scope:recipient = { 
			if = { limit = { has_trait = depressed_genetic } remove_trait = depressed_genetic } 
			if = { limit = { has_trait = lunatic_genetic } remove_trait = lunatic_genetic } 
			if = { limit = { has_trait = possessed_genetic } remove_trait = possessed_genetic } 
			if = { limit = { has_trait = depressed_1 } remove_trait = depressed_1 } 
			if = { limit = { has_trait = lunatic_1 } remove_trait = lunatic_1 } 
			if = { limit = { has_trait = possessed_1 } remove_trait = possessed_1 } 
			if = { limit = { has_trait = ill } remove_trait = ill } 
			if = { limit = { has_trait = pneumonic } remove_trait = pneumonic } 
			if = { limit = { has_trait = great_pox } remove_trait = great_pox } 
			if = { limit = { has_trait = lovers_pox } remove_trait = lovers_pox } 
			if = { limit = { has_trait = leper } remove_trait = leper } 
			if = { limit = { has_trait = wounded_1 } remove_trait = wounded_1 } 
			if = { limit = { has_trait = wounded_2 } remove_trait = wounded_2 } 
			if = { limit = { has_trait = wounded_3 } remove_trait = wounded_3 } 
			if = { limit = { has_trait = infirm } remove_trait = infirm } 
			if = { limit = { has_trait = incapable } remove_trait = incapable } 
			if = { limit = { has_trait = gout_ridden } remove_trait = gout_ridden } 
			if = { limit = { has_trait = consumption } remove_trait = consumption } 
			if = { limit = { has_trait = cancer } remove_trait = cancer } 
			if = { limit = { has_trait = typhus } remove_trait = typhus } 
			if = { limit = { has_trait = bubonic_plague } remove_trait = bubonic_plague } 
			if = { limit = { has_trait = smallpox } remove_trait = smallpox } 
			if = { limit = { has_trait = sickly } remove_trait = sickly } 
			if = { limit = { has_trait = inbred } remove_trait = inbred } 
			if = { limit = { has_trait = weak } remove_trait = weak } 
			if = { limit = { has_trait = dull } remove_trait = dull } 
			if = { limit = { has_trait = spindly } remove_trait = spindly } 
			if = { limit = { has_trait = wheezing } remove_trait = wheezing } 
			if = { limit = { has_trait = bleeder } remove_trait = bleeder } 
			if = { limit = { has_trait = infertile } remove_trait = infertile } 
			if = { limit = { has_trait = early_great_pox } remove_trait = early_great_pox } 
			if = { limit = { has_trait = impotent } remove_trait = impotent } 
		}
	}

	auto_accept = yes
}